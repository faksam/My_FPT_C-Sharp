<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252" />
<title>FPT University - C# & .NET technology</title>
<link rel="stylesheet" href="cf112.css" type="text/css" charset="utf-8" />
</head>
<body>
    <div align="center">
      <center>
    <table border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse; border-width: 0; bordercolor: #111111" width="1024" id="AutoNumber6">
      <tr>
        <td width="1024" style="border-style: none; border-width: medium; height:168px" height="2" bgcolor="#339966" bordercolor="#333333" background="images/background.jpg"><br /><br />
        <p style="margin-left: 4; margin-top: 0; margin-bottom: 0; text-align:center" ><br/>
        <b><font size="5" color="#FFFFFF" face="Arial Black">Software Development</font></b></p>
        <p style="margin-left: 4; margin-top: 0; margin-bottom: 0"><i>
        <font face="Arial Black" color="#FFCC00">&nbsp;</font></i><br/>
        <br/></p>&nbsp;</td>
      </tr>
      <tr>
        <td width="1024" style="border-style: none; border-width: medium; bordercolor:#333333" bgcolor="#FFFFFF" valign="top">
        <table border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse; border-left-width: 0; border-right-width: 0; border-bottom-width:0" bordercolor="#006666" width="100%" id="AutoNumber7" height="8">
          <tr>
            <td width="12%" style="border-left: 1px solid #006666; border-right-style: solid; border-right-width: 1; border-top-style: solid; border-top-width: 1; border-bottom-style:none; border-bottom-width:medium" align="center" bgcolor="#006666" bordercolor="#339966" height="15">
            <a class="mainmenu" href="index.html">Home</a></td>
            <td width="18%" style="border-left-style: solid; border-left-width: 1; border-right-style: solid; border-right-width: 1; border-top-style: solid; border-top-width: 1; border-bottom-style:none; border-bottom-width:medium" align="center" bgcolor="#006666" bordercolor="#339966" height="15">
            <a class="mainmenu" href="outline.html">Outline</a></td>
            <td width="26%" style="border-left-style: solid; border-left-width: 1; border-right-style: solid; border-right-width: 1; border-top-style: solid; border-top-width: 1; border-bottom-style:none; border-bottom-width:medium" align="center" bgcolor="#006666" bordercolor="#339966" height="15">
            <a class="mainmenu" href="timeline.html">Timeline</a></td>
            <td width="24%" style="border-left-style: solid; border-left-width: 1; border-right-style: solid; border-right-width: 1; border-top-style: solid; border-top-width: 1; border-bottom-style:none; border-bottom-width:medium" align="center" bgcolor="#006666" bordercolor="#339966" height="15">
            <a class="mainmenu" href="readings.html">Readings</a></td>
            <td width="20%" style="border-left-style: solid; border-left-width: 1; border-right: 1px solid #006666; border-top-style: solid; border-top-width: 1; border-bottom-style:none; border-bottom-width:medium" align="center" bgcolor="#006666" bordercolor="#339966" height="15">
            <a class="mainmenu" href="instructors.html">Instructors</a></td>
          </tr>
          <tr>
            <td width="100%" style="border-left-style: none; border-left-width: medium; border-right-style: none; border-right-width: medium; border-top-style: solid; border-top-width: 1; border-bottom-style: none; border-bottom-width: medium" align="center" colspan="5">
            <table border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse; border-width: 0" bordercolor="#111111" width="100%" id="AutoNumber8">
              <tr>
                <td width="100%" style="border-style: none; border-width: medium">
                <table border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse; border-left-width: 2; border-right-width: 2; border-top-width: 2; border-bottom-width: 0" bordercolor="#006666" id="AutoNumber9" height="1">
                  <tr>
                    <td width="100%" style="border-style: none; border-width: medium" height="1" colspan="2" bgcolor="#004646">
                    <p style="margin-top: -6; margin-bottom: -6"/></td>
                  </tr>
                  <tr>
                    <td style="border-left-style: none; border-left-width: medium; border-right-style: none; border-right-width: medium; border-top-style: none; border-top-width: medium; border-bottom: 2px none #006666" height="1" bgcolor="#006666" valign="top">
                    <div align="center" style="width: 169">
                      <center>
                      <p style="margin-top: -4; margin-bottom: -4">&nbsp;</p>
                      <table border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" width="91%" id="AutoNumber10" bgcolor="#FFFFFF" height="1" bordercolor="#003399">
                        <tr>
            <td width="100%" bgcolor="#CAD6EE" style="border-left-color: #003399; border-left-width: 2; border-right-color: #003399; border-right-width: 2; border-top-color:#003399; border-bottom-color:#003399" height="20">
            <p style="margin: 2 3"><b>
            <font face="Verdana" size="2" color="#003399">Readings</font></b></p></td>
                        </tr>
                        <tr>
            <td width="100%" bgcolor="#FFFFFF" style="border-left:1px solid #FF0000; border-right:1px solid #FF0000; border-bottom-style: none; border-bottom-width: medium; border-top-style:solid; border-top-width:1" height="25">
            <p style="margin: 2 3; "><a class="leftmenu" href="Chapter01.html">Chapter 1</a></p></td>
                        </tr>
                        <tr>
            <td width="100%" bgcolor="#FFFFFF" style="border-left:1px solid #FF0000; border-right:1px solid #FF0000; border-top-style: none; border-top-width: medium; border-bottom-style: none; border-bottom-width: medium; " height="25">
            <p style="margin: 2 3"><a class="leftmenu" href="Chapter02.html">Chapter 2</a></p></td>
                        </tr>
                        <tr>
            <td width="100%" bgcolor="#FFFFFF" style="border-left:1px solid #FF0000; border-right:1px solid #FF0000; border-top-style: none; border-top-width: medium; border-bottom-style: none; border-bottom-width: medium; " height="25">
            <p style="margin: 2 3"><a class="leftmenu" href="Chapter03.html">Chapter 3</a></p></td>
                        </tr>
                        <tr>
            <td width="100%" bgcolor="#FFFFFF" style="border-left:1px solid #FF0000; border-right:1px solid #FF0000; border-top-style: none; border-top-width: medium; border-bottom-style: none; border-bottom-width: medium; " height="25">
            <p style="margin: 2 3"><a class="leftmenu" href="Chapter04.html">Chapter 4</a></p></td>
                        </tr>
                        <tr>
            <td width="100%" bgcolor="#FFFFFF" style="border-left:1px solid #FF0000; border-right:1px solid #FF0000; border-top-style: none; border-top-width: medium; border-bottom-style: none; border-bottom-width: medium; " height="25">
            <p style="margin: 2 3"><a class="leftmenu" href="Chapter05.html">Chapter 5</a></p></td>
                        </tr>
                        <tr>
            <td width="100%" bgcolor="#FFFFFF" style="border-left:1px solid #FF0000; border-right:1px solid #FF0000; border-top-style: none; border-top-width: medium; border-bottom-style: none; border-bottom-width: medium; " height="25">
            <p style="margin: 2 3"><a class="leftmenu" href="Chapter06.html">Chapter 6</a></p></td>
                        </tr>
                        <tr>
            <td width="100%" bgcolor="#FFFFFF" style="border-left:1px solid #FF0000; border-right:1px solid #FF0000; border-top-style: none; border-top-width: medium; border-bottom-style:solid; border-bottom-width:1" height="25">
            <p style="margin: 2 3"><a class="leftmenu" href="Chapter07.html">Chapter 7</a></p></td>
                        </tr>
                        <tr>
            <td width="100%" bgcolor="#FFFFFF" style="border-left:1px solid #FF0000; border-right:1px solid #FF0000; border-top-style: none; border-top-width: medium; border-bottom-style:solid; border-bottom-width:1" height="25">
            <p style="margin: 2 3"><a class="leftmenu" href="Chapter08.html">Chapter 8</a></p></td>
                        </tr>
                        <tr>
            <td width="100%" bgcolor="#FFFFFF" style="border-left:1px solid #FF0000; border-right:1px solid #FF0000; border-top-style: none; border-top-width: medium; border-bottom-style:solid; border-bottom-width:1" height="25">
            <p style="margin: 2 3"><a class="leftmenu" href="Chapter10.html">Chapter 10</a></p></td>
                        </tr>
                        <tr>
            <td width="100%" bgcolor="#FFFFFF" style="border-left:1px solid #FF0000; border-right:1px solid #FF0000; border-top-style: none; border-top-width: medium; border-bottom-style:solid; border-bottom-width:1" height="25">
            <p style="margin: 2 3"><a class="leftmenu" href="Chapter11.html">Chapter 11</a></p></td>
                        </tr>                        
                        <tr>
            <td width="100%" bgcolor="#FFFFFF" style="border-left:1px solid #FF0000; border-right:1px solid #FF0000; border-top-style: none; border-top-width: medium; border-bottom-style:solid; border-bottom-width:1" height="25">
            <p style="margin: 2 3"><a class="leftmenu" href="Chapter13.html">Chapter 13</a></p></td>
                        </tr>
                        <tr>
            <td width="100%" bgcolor="#FFFFFF" style="border-left:1px solid #FF0000; border-right:1px solid #FF0000; border-top-style: none; border-top-width: medium; border-bottom-style:solid; border-bottom-width:1" height="25">
            <p style="margin: 2 3"><a class="leftmenu" href="Chapter14.html">Chapter 14</a></p></td>
                        </tr>
                        <tr>
            <td width="100%" bgcolor="#FFFFFF" style="border-left:1px solid #FF0000; border-right:1px solid #FF0000; border-top-style: none; border-top-width: medium; border-bottom-style:solid; border-bottom-width:1" height="25">
            <p style="margin: 2 3"><a class="leftmenu" href="Chapter16.html">Chapter 16</a></p></td>
                        </tr>
                        <tr>
            <td width="100%" bgcolor="#FFFFFF" style="border-left:1px solid #FF0000; border-right:1px solid #FF0000; border-top-style: none; border-top-width: medium; border-bottom-style:solid; border-bottom-width:1" height="25">
            <p style="margin: 2 3"><a class="leftmenu" href="Chapter17.html">Chapter 17</a></p></td>
                        </tr>
                        <tr>
            <td width="100%" bgcolor="#FFFFFF" style="border-left:1px solid #FF0000; border-right:1px solid #FF0000; border-top-style: none; border-top-width: medium; border-bottom-style:solid; border-bottom-width:1" height="25">
            <p style="margin: 2 3"><a class="leftmenu" href="Chapter19.html">Chapter 19</a></p></td>
                        </tr>
                        <tr>
            <td width="100%" bgcolor="#FFFFFF" style="border-left:1px solid #FF0000; border-right:1px solid #FF0000; border-top-style: none; border-top-width: medium; border-bottom-style:solid; border-bottom-width:1" height="25">
            <p style="margin: 2 3"><a class="leftmenu" href="Chapter20.html">Chapter 20</a></p></td>
                        </tr>
                        <tr>
            <td width="100%" bgcolor="#FFFFFF" style="border-left:1px solid #FF0000; border-right:1px solid #FF0000; border-top-style: none; border-top-width: medium; border-bottom-style:solid; border-bottom-width:1" height="25">
            <p style="margin: 2 3"><a class="leftmenu" href="Chapter21.html">Chapter 21</a></p></td>
                        </tr>
                        <tr>
            <td width="100%" bgcolor="#FFFFFF" style="border-left:1px solid #FF0000; border-right:1px solid #FF0000; border-top-style: none; border-top-width: medium; border-bottom-style:solid; border-bottom-width:1" height="25">
            <p style="margin: 2 3"><a class="leftmenu" href="Chapter22.html">Chapter 22</a></p></td>
                        </tr>
                        <tr>
            <td width="100%" bgcolor="#FFFFFF" style="border-left:1px solid #FF0000; border-right:1px solid #FF0000; border-top-style: none; border-top-width: medium; border-bottom-style:solid; border-bottom-width:1" height="25">
            <p style="margin: 2 3"><a class="leftmenu" href="Chapter23.html">Chapter 23</a></p></td>
                        </tr>
                        <tr>
            <td width="100%" bgcolor="#FFFFFF" style="border-left:1px solid #FF0000; border-right:1px solid #FF0000; border-top-style: none; border-top-width: medium; border-bottom-style:solid; border-bottom-width:1" height="25">
            <p style="margin: 2 3"><a class="leftmenu" href="Chapter24.html">Chapter 24</a></p></td>
                        </tr>
                        <tr>
            <td width="100%" bgcolor="#FFFFFF" style="border-left:1px solid #FF0000; border-right:1px solid #FF0000; border-top-style: none; border-top-width: medium; border-bottom-style:solid; border-bottom-width:1" height="25">
            <p style="margin: 2 3"><a class="leftmenu" href="Chapter25.html">Chapter 25</a></p></td>
                        </tr>
                      </table>
                      </center>
                    </div>
                    </td>                    
                    <td width="855" style="border-left-style: none; border-left-width: medium; border-right-style: solid; border-right-width: 1; border-top-style: none; border-top-width: medium; border-bottom-style: none; border-bottom-width: medium" height="1" valign="top">
                    <div style="margin-left:10px;margin-top:10px;margin-bottom:10px;margin-right:10px">
                    <h1>Chapter 24 - ASP.NET 2.0 Web applications</h1>
                    <span id="top" class="style1">Content</span>
                    <ul>
                    <li><a href="#sta" class="leftmenu">The issue of state</a></li>
                    <li><a href="#tec" class="leftmenu">ASP.NET state management techniques</a></li>
                    <li><a href="#vie" class="leftmenu">Understanding the role of ASP.NET View State</a></li>
                    <li><a href="#app" class="leftmenu">Understanding the Application/Session</a></li>
                    <li><a href="#glo" class="leftmenu">The role of the Global.asax file</a></li>
                    <li><a href="#cac" class="leftmenu">Working with the Application Cache</a></li>
                    <li><a href="#coo" class="leftmenu">Understanding Cookies</a></li>
                    <li><a href="#con" class="leftmenu">Configuring ASP.NET Web application using Web.config</a></li>
                    <li><a href="#sum" class="leftmenu">Summary</a></li>
                    </ul>
                    <p class="normal">
                    This chapter addresses the all important topic of state management. Here you will learn the role of view state, control state, and session- and application-level variables, as well as a state-centric entity provided by ASP.NET termed the <i>application cache</i>. 
                    Once you have a solid understanding of the state management techniques offered by the .NET platform, the chapter wraps up with a discussion of the role of the Web.config file and shows various configuration-centric techniques.
                    </p>
                    <span id="sta" class="style1">The issue of state</span>
                    <p class="normal">
                    Because HTTP is a <i>stateless</i> wire protocol, so it makes web development extremely different from the process of building an executable assembly. For example, when you are building a Windows Forms application, you can rest assured that 
                    any member variables defined in the Form-derived class will typically exist in memory until the user explicitly shuts down the executable:<br />
                    <span class="sample">
<span class="keyword">public partial class</span> MainWindow : Form<br />
{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// State data!</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private string</span> userFavoriteCar;<br />
...<br />
}                    
                    </span><br />
                    However, HTTP has no clue how to automatically remember data once the HTTP response has been sent, it stands to reason that the Page object is destroyed instantly. Therefore, when the client posts back to the *.aspx file, 
                    a <i>new</i> Page object is constructed that will reset any page-level member variables. This is clearly a major dilemma. Imagine how painful online shopping would be if every time you posted back to the web server, any and all information you previously entered 
                    (such as the items you wish to purchase) were discarded. When you wish to remember information regarding the users who are logged on to your site, you need to make use of various state management techniques.
                    </p>
                    <div style="width:100%;text-align:right;"><a class="leftmenu" href="#top">Back to top</a></div>
                    <span id="tec" class="style1">ASP.NET state management techniques</span>
                    <p class="normal">
                    ASP .NET provides several mechanisms that you can use to maintain stateful information in your web applications. Specifically, you have the following options: 
                    </p>
                    <ul>
                    <li>Make use of ASP.NET view state.</li>
                    <li>Make use of ASP.NET control state.</li>
                    <li>Define application-level variables.</li>
                    <li>Define session-level variables.</li>
                    <li>Make use of the cache object.</li>
                    <li>Interact with cookie data.</li>
                    </ul>
                    <div style="width:100%;text-align:right;"><a class="leftmenu" href="#top">Back to top</a></div>
                    <span id="sta" class="style1">Understanding the role of ASP.NET View State</span>
                    <p class="normal">
                    Under ASP.NET, we are no longer required to manually scrape out and repopulate the values contained within the HTML widgets because the ASP.NET runtime will automatically embed a hidden formfield (named __VIEWSTATE), which will flow between the browser and a specific page. 
                    The data assigned to this field is a Base64-encoded string that contains a set of name/value pairs that represent the values of each GUI widget on the page at hand.<br />
                    The System.Web.UI.Page base class's Init event handler is the entity in charge of reading the incoming values found within the __VIEWSTATE field to populate the appropriate member variables in the derived class.<br />
                    Also, just before the outgoing response is emitted back to the requesting browser, the __VIEWSTATE data is used to repopulate the form's widgets, to ensure that the current values of the HTML widgets appear as they did prior to the previous postback.<br />
                    Furthermore, view state is most useful when you have a dynamically populated web widget that always needs to be repopulated for each and every postback (such as an ASP.NET GridView, which is always filled using a database hit). 
                    If you did not disable view state for pages that contain such widgets, the entire state of the grid is represented within the hidden __VIEWSTATE field.<br />
                    Given that complex pages may contain numerous ASP .NET web controls, you can imagine how large this string would become. 
                    As the payload of the HTTP request/response cycle could become quite heavy, this may become a problem for the dial-up web surfers of the world. In cases such as these, you may find faster throughput if you disable view state for the page.<br />
                    To disable view state for the page, set value for enableViewState attribute of &lt;%@Page%&gt; directive to <b>false</b>. Default value of this attribute is true.<br />
                    If the idea of disabling view state for the entire *.aspx file seems a bit too aggressive, recall that every descendent of the System.Web.UI.Control base class inherits the EnableViewState property, which makes it very simple to disable view state on a control-by-control basis:<br />
                    <span class="sample">
                    &lt;asp:GridView id="myHugeDynamicallyFilledDataGrid" runat="server" EnableViewState="false"&gt;<br />&lt;/asp:GridView&gt;
                    </span><br />
                    Be aware that ASP.NET pages reserve a small part of the __VIEWSTATE string for internal use. Given this, you will find that the __VIEWSTATE field will still appear in the client-side browser even when the entire page (and all the controls) have disabled view state.<br />
                    </p>
                    <span class="style2">Adding custom View State data</span>
                    <p class="normal">
                    In addition to the EnableViewState property, the System.Web.UI.Control base class also provides an inherited property named ViewState. Under the hood, this property provides access to a System.Web.UI.StateBag type, 
                    which represents all the data contained within the __VIEWSTATE field. Using the indexer of the StateBag type, you can embed custom information within the hidden __VIEWSTATE form field using a set of name/value pairs. Here’s a simple example:<br />
                    <span class="sample">
<span class="keyword">protected void</span> btnAddToVS_Click (<span class="keyword">object</span> sender, EventArgs e)<br />
{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ViewState["CustomViewStateItem"] = "Some user data";<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lblVSValue.Text = (string)ViewState["CustomViewStateItem"];<br />
}                    
                    </span><br />
                    Because the System.Web.UI.StateBag type has been designed to operate on any type-derived System.Object, when you wish to access the value of a given key, you will need to explicitly cast it into the correct underlying data type (in this case, a System.String). 
                    Be aware, however, that values placed within the __VIEWSTATE field cannot literally be <i>any</i> object. Specifically, the only valid types are strings, integers, Booleans, ArrayLists, Hashtables, or an array of these types.<br />
                    Most of the time, custom view state data is best suited for user-specific preferences. For example, you may establish a point of view-state data that specifies how a user wishes to view the UI of a GridView (such as a sort order). 
                    View state data is not well suited for full-blown user data, such as items in a shopping cart, cached DataSets, or whatnot. When you need to store this sort of complex information, you are required to work with session data.
                    </p>
                    <span class="style2">Control State</span>
                    <p class="normal">
                    As of ASP .NET 2.0, a control's state data can now be persisted via <i>control state</i> rather than view state. This technique is most helpful if you have written a custom ASP.NET web control that must remember data between round-trips. 
                    While the ViewState property can be used for this purpose, if view state is disabled at a page level, the custom control is effectively broken. For this very reason, web controls now support a ControlState property.<br />
                    Control state works identically to view state; however, it will not be disabled if view state is disabled at the page level.
                    </p>
                    <div style="width:100%;text-align:right;"><a class="leftmenu" href="#top">Back to top</a></div>
                    <span id="app" class="style1">Understanding the Application/Session</span>
                    <p class="normal">
                    Under ASP .NET, application state is maintained by an instance of the HttpApplicationState type. This class enables you to share global information across all users (and all pages) who are logged on to your ASP.NET application. 
                    Not only can application data be shared by all users on your site, but also if one user changes the value of an application-level data point, the change is seen by all others on their next postback.<br />
                    On the other hand, session state is used to remember information for a specific user (again, such as items in a shopping cart). Physically, a user's session state is represented by the HttpSessionState class type. 
                    When a new user logs on to an ASP.NET web application, the runtime will automatically assign that user a new session ID, which by default will expire after 20 minutes of inactivity. Thus, if 20,000 users are logged on to your site, you have 20,000 distinct HttpSessionState objects, 
                    each of which is assigned a unique session ID.<br />
                    The relationship between a web application and web sessions is shown in the below figure.
                    </p>
                    <div style="text-align:center"><img alt="" src="images/2401.jpg" /></div><br />
                    <span class="style2">Maintaining Application-Level state data</span>
                    <p class="normal">
                    The HttpApplicationState type enables developers to share global information across multiple sessions in an ASP.NET application. For example, you may wish to maintain an applicationwide connection string that can be used by all pages, a common DataSet used by multiple pages, or 
                    any other piece of data that needs to be accessed on an applicationwide scale. The below table describes some core members of this type.
                    </p>
                    <table border="1" cellpadding="5" cellspacing="0">
                        <tr>
                            <td class="header" style="width:15%;">Members</td>
                            <td class="header">Meaning in Life</td>
                        </tr>
                        <tr>
                            <td valign="top">AllKeys</td>
                            <td>This property returns an array of System.String types that represent all the names in the HttpApplicationState type.</td>
                        </tr>
                        <tr>
                            <td valign="top">Count</td>
                            <td>This property gets the number of item objects in the HttpApplicationState type.</td>
                        </tr>
                        <tr>
                            <td valign="top">Add()</td>
                            <td>This method allows you to add a new name/value pair into the HttpApplicationState type. 
                            Do note that this method is typically <i>not</i> used in favor of the indexer of the HttpApplicationState class.
                            </td>
                        </tr>
                        <tr>
                            <td valign="top">Clear()</td>
                            <td>This method deletes all items in the HttpApplicationState type. This is functionally equivalent to the RemoveAll()method.</td>
                        </tr>
                        <tr>
                            <td valign="top">Lock()</td>
                            <td rowspan="2" valign="top">These two methods are used when you wish to alter a set of application variables in a thread-safe manner.</td>
                        </tr>
                        <tr>
                            <td valign="top">Unlock()</td>                            
                        </tr>
                        <tr>
                            <td valign="top">RemoveAll()</td>
                            <td rowspan="3" valign="top">These methods remove a specific item (by string name) within the HttpApplicationState type.<br />
                            RemoveAt() removes the item via a numerical indexer.
                            </td>
                        </tr>
                        <tr>
                            <td valign="top">Remove()</td>                            
                        </tr>
                        <tr>
                            <td valign="top">RemoveAt()</td>                            
                        </tr>
                    </table>
                    <p class="normal">
                    Syntax to declare an Application variable: 
                    <span class="sample">Application["variable_name"]</span><br />
                    There is example of setting up some application variables.<br />
                    <span class="sample">
                    Application["SalesPersonOfTheMonth"] = "Chucky";<br />
                    Application["CurrentCarOnSale"] = "Colt";<br />
                    Application["MostPopularColorOnLot"] = "Black";<br /> 
                    </span><br />
                    Like the ViewState property, notice how you must cast the value returned from the HttpApplicationState type into the correct underlying type. 
                    Now, given that the HttpApplicationState type can hold any type, it should stand to reason that you can place custom types (or any .NET type) within your site's application state.
                    </p>
                    <span class="style2">Maintaining Session Data</span>
                    <p class="normal">
                    A <i>session</i> is little more than a given user's interaction with a web application, which is represented via the HttpSessionState type. To maintain stateful information for a particular user, 
                    the HttpApplication-derived type and any System.Web.UI.Page-derived types may access the Session property.<br />
                    The classic example of the need to maintain per-user data would be an online shopping cart. Again, if ten people all log on to an online store, each individual will maintain a unique set of items that she (may) intend to purchase.<br />
                    When a new user logs on to your web application, the .NET runtime will automatically assign the user a unique session ID, which is used to identify the user in question. 
                    Each session ID is assigned a custom instance of the HttpSessionState type to hold on to user-specific data. Inserting or retrieving session data is syntactically identical to manipulating application data, for example:<br />
                    <span class="sample">
<span class="comment">// Add/retrieve a session variable for current user.</span><br />
Session["DesiredCarColor"] = "Green";<br />
<span class="keyword">string</span> color = (<span class="keyword">string</span>) Session["DesiredCarColor"];                    
                    </span><br /><br />
                    The HttpApplication-derived type allows you to intercept the beginning and end of a session via the Session_Start() and Session_End() event handlers. 
                    Within Session_Start(), you can freely create any per-user data items, while Session_End() allows you to perform any work you may need to do when the user's session has terminated.<br />
                    The HttpSessionState type also defines a set of members that control the expiration policy of the current session. Again, by default each user has 20 minutes of inactivity before the HttpSessionState object is destroyed. 
                    Thus, if a user enters your web application (and therefore obtains a unique session ID), but does not return to the site within 20 minutes, the runtime assumes the user is no longer interested and destroys all session data for that user.<br />
                    You are free to change this default 20-minute expiration value on a user-by-user basis using the Timeout property. The most common place to do so is within the scope of your Global.Session_Start()method:
                    </p>
                    <p class="sample">
<span class="keyword">protected void</span> Session_Start(<span class="keyword">Object</span> sender, EventArgs e)<br />
{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Each user has 5 minutes of inactivity.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Session.Timeout = 5;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Session["UserShoppingCartInfo"] = <span class="keyword">new</span> UserShoppingCart();<br />
}                    
                    </p>
                    <div style="width:100%;text-align:right;"><a class="leftmenu" href="#top">Back to top</a></div>
                    <span id="glo" class="style1">The role of the Global.asax file</span>
                    <p class="normal">
                    Global.asax is a file that contains event handlers to interact with application-level and session-level events. The below table documents the role of each event.
                    </p>
                    <table border="1" cellpadding="5" cellspacing="0">
                        <tr>
                            <td class="header">Event Handler</td>
                            <td class="header">Meaning in Life</td>
                        </tr>
                        <tr>
                            <td valign="top">Application_Start()</td>
                            <td>
                            This event handler is called the very first time the web application is launched. Thus, this event will fire exactly once over the lifetime of a web application. 
                            This is an ideal place to define application-level data used throughout your web application.
                            </td>
                        </tr>
                        <tr>
                            <td valign="top">Application_End()</td>
                            <td>
                            This event handler is called when the application is shutting down. This will occur when the last user times out or if you manually shut down the application via IIS.
                            </td>
                        </tr>
                        <tr>
                            <td valign="top">Session_Start()</td>
                            <td>This event handler is fired when a new user logs on to your application. Here you may establish any user-specific data points.</td>
                        </tr>
                        <tr>
                            <td valign="top">Session_End()</td>
                            <td>This event handler is fired when a user's session has terminated (typically through a predefined timeout).</td>
                        </tr>
                        <tr>
                            <td valign="top">Application_Error()</td>
                            <td>This is a global error handler that will be called when an unhandled exception is thrown by the web application.</td>
                        </tr>
                    </table><br />
                    <div style="width:100%;text-align:right;"><a class="leftmenu" href="#top">Back to top</a></div>
                    <span id="cac" class="style1">Working with the Application Cache</span>
                    <p class="normal">
                    ASP.NET provides a second and more flexible manner to handle applicationwide data. As you recall, the values within the HttpApplicationState object remain in memory as long as your web application is alive and kicking.<br />
                    Sometimes, however, you may wish to maintain a piece of application data only for a specific period of time. For example, you may wish to obtain an ADO.NET DataSet that is valid for only five minutes. 
                    After that time, you may want to obtain a fresh DataSet to account for possible user modifications.<br />
                    While it is technically possible to build this infrastructure using HttpApplicationState and some sort of handcrafted monitor, your task is greatly simplified using the ASP.NET application cache.<br />
                    As suggested by its name, the ASP .NET System.Web.Caching.Cache object (which is accessible via the Context.Cache property) allows you to define an object that is accessible by all users (from all pages) for a fixed amount of time. 
                    In its simplest form, interacting with the cache looks identical to interacting with the HttpApplicationState type:
                    </p>
                    <p class="sample">
<span class="comment">// Add an item to the cache.</span><br />
<span class="comment">// This item will *not* expire.</span><br />
Context.Cache["SomeStringItem"] = "This is the string item";<br />
<span class="keyword">string</span> s = (<span class="keyword">string</span>)Context.Cache["SomeStringItem"];
                    </p>
                    <p class="normal">
                    The System.Web.Caching.Cache class defines only a small number of members beyond the type's indexer. For example, the Add()method can be used to insert a new item into the cache that is not currently defined 
                    (if the specified item is already present, Add() does nothing).<br />
                    The Insert()method will also place a member into the cache. If, however, the item is currently defined, Insert() will replace the current item with the new type.<br />
                    Reads example of Data caching at page 902 of textbook.
                    </p>
                    <div style="width:100%;text-align:right;"><a class="leftmenu" href="#top">Back to top</a></div>
                    <span id="coo" class="style1">Understanding Cookies</span>
                    <p class="normal">
                    The final state management technique examined here is the act of persisting data within <i>cookie</i>, which is often realized as a text file (or set of files) on the user's machine. 
                    When a user logs on to a given site, the browser checks to see if the user's machine has a cookie file for the URL in question and, if so, appends this data to the HTTP request.<br />
                    The exact location of your cookie files will depend on which browser you happen to be using. For those using Microsoft Internet Explorer, cookies are stored by default under C:\Documents and
Settings\&lt;loggedOnUser&gt;\Cookies.<br />
                    The contents of a given cookie file will obviously vary among URLs, but keep in mind that they are ultimately text files. Thus, cookies are a horrible choice when you wish to maintain sensitive information about the current user (such as a credit card number, password, or whatnot). 
                    Even if you take the time to encrypt the data, a crafty hacker could decrypt the value and use it for purely evil pursuits.<br />
                    Understand that ASP.NET cookies can be configured to be either persistent or temporary. A <i>persistent</i> cookie is typically regarded as the classic definition of cookie data, 
                    in that the set of name/value pairs is physically saved to the user's hard drive.<br />
                    <i>Temporary</i> cookies (also termed <i>session cookies</i>) contain the same data as a persistent cookie, but the name/value pairs are never saved to the user's machine; rather, they exist only within the HTTP header. 
                    Once the user logs off your site, all data contained within the session cookie is destroyed.<br />
                    Most browsers support cookies of up to 4,096 bytes. Because of this size limit, cookies are best used to store small amounts of data, such as a user ID that can be used to identify the user and pull details from a database.<br />
                    The System.Web.HttpCookie type is the class that represents the server side of the cookie data (persistent or temporary). When you wish to create a new cookie, you access the Response.Cookies property. 
                    Once the new HttpCookie is inserted into the internal collection, the name/value pairs flow back to the browser within the HTTP header.<br />
                    To interact with the incoming cookie data under ASP.NET, access the HttpRequest.Cookies property. Recall that the browser is the entity in charge of accessing persisted cookies when navigating to a previously visited page.
                    </p>
                    <div style="width:100%;text-align:right;"><a class="leftmenu" href="#top">Back to top</a></div>
                    <span id="con" class="style1">Configuring ASP.NET Web application using Web.config</span>
                    <p class="normal">
                    Web-centric configuration files for ASP.NET web applications, are <i>always</i> named Web.config. Like any *.config file, Web.config defines the root-level &lt;configuration&gt; element. 
                    Nested within the root is the &lt;system.web&gt; element, which can contain numerous subelements used to control how your web application should behave at runtime. 
                    Under ASP.NET, the Web.config file can be modified using any text editor. The below table outlines some of the subelements that can be found within a Web.config file.
                    </p>
                    <table border="1" cellpadding="5" cellspacing="0">
                        <tr>
                            <td class="header">Element</td>
                            <td class="header">Meaning in Life</td>
                        </tr>
                        <tr>
                            <td valign="top">&lt;appSettings&gt;</td>
                            <td>This element is used to establish custom name/value pairs that can be programmatically read in memory for use by your pages.</td>
                        </tr>
                        <tr>
                            <td valign="top">&lt;authentication&gt;</td>
                            <td>This security-related element is used to define the authentication mode for this web application.</td>
                        </tr>
                        <tr>
                            <td valign="top">&lt;authorization&gt;</td>
                            <td>This is another security-centric element used to define which users can access which resources on the web server.</td>
                        </tr>
                        <tr>
                            <td valign="top">&lt;compilation&gt;</td>
                            <td>
                            This element is used to enable (or disable) debugging and define the default .NET language used by this web application, 
                            and it may optionally define the set of external .NET assemblies that should be automatically referenced.
                            </td>
                        </tr>
                        <tr>
                            <td valign="top">&lt;connectionStrings&gt;</td>
                            <td>This element is used to hold external connection strings used within this website.</td>
                        </tr>
                        <tr>
                            <td valign="top">&lt;customErrors&gt;</td>
                            <td>This element is used to tell the runtime exactly how to display errors that occur during the functioning of the web application.</td>
                        </tr>
                        <tr>
                            <td valign="top">&lt;globalization&gt;</td>
                            <td>This element is used to configure the globalization settings for this web application.</td>
                        </tr>
                        <tr>
                            <td valign="top">&lt;sessionState&gt;</td>
                            <td>This element is used to control how and where session state data will be stored by the .NET runtime.</td>
                        </tr>
                        <tr>
                            <td valign="top">&lt;trace&gt;</td>
                            <td>This element is used to enable (or disable) tracing support for this web application.</td>
                        </tr>
                    </table>
                    <p class="normal">
                    Reads enabling tracing at page 913, and customizing Error output at page 914 of textbook.                    
                    </p>
                    <span class="style2">Configuration inheritance</span>
                    <p class="normal">
                    Last but not least is <i>configuration inheritance</i>. As you learned in the previous chapter, a web application can be defined as the set of all files contained within a root directory and any optional subdirectories.<br />
                    All the example applications in this and the previous chapter have existed on a single root directory managed by IIS (with the optional Bin folder). However, large-scale web applications tend to define numerous subdirectories off the root, 
                    each of which contains some set of related files. Like a traditional desktop application, this is typically done for the benefit of us mere humans, as a hierarchal structure can make a massive set of files more understandable.<br />
                    When you have an ASP.NET web application that consists of optional subdirectories off the root, you may be surprised to discover that <i>each</i> subdirectory may have its own Web.config file! 
                    By doing so, you allow each subdirectory to override the settings of a parent directory. If the subdirectory in question does not supply a custom Web.config file, 
                    it will inherit the settings of the next available Web.config file up the directory structure.
                    </p>
                    <div style="text-align:center"><img alt="" src="images/2402.jpg" /></div>
                    <p class="normal">
                    Of course, although ASP.NET does allow you to define numerous Web.config files for a single web application, you are not required to do so. 
                    In a great many cases, your web applications function just fine using nothing else than the Web.config file located in the root directory of the IIS virtual directory.
                    </p>
                    <div style="width:100%;text-align:right;"><a class="leftmenu" href="#top">Back to top</a></div>
                    <span id="sum" class="style1">Summary</span>
                    <p class="normal">
                    In this chapter, you rounded out your knowledge of ASP.NET by examining how to leverage the HttpApplication type. As you have seen, 
                    this type provides a number of default event handlers that allow you to intercept various application- and session-level events.<br />
                    The bulk of this chapter was spent examining a number of state management techniques. Recall that view state is used to automatically repopulate the values of HTML widgets between postbacks to a specific page. 
                    Next, you checked out the distinction of application- and session-level data, cookie management, and the ASP.NET application cache. Finally, you examined a number of elements that may be contained in the Web.config file.
                    </p>
                    </div>
                    </td>
                  </tr>
                </table>
                </td>
              </tr>
            </table>
            </td>
          </tr>
          <tr>
            <td width="100%" style="border-bottom:1px solid #006666; border-left:1px solid #006666; border-right:1px solid #006666; border-top-style: none; border-top-width: medium; " align="center" colspan="5" bgcolor="#006666" height="1">
            <p style="margin-top: 3; margin-bottom: 3"><b>
            <font face="Verdana" size="1" color="#FFFFFF">Copyright 2010
             All Rights Reserved.
             </font></b></p></td>
          </tr>
        </table>
        </td>
      </tr>
    </table>    
      </center>
    </div>    
</body>
</html>